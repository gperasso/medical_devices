<!DOCTYPE html>
<html>
  <head>
    <title>Medical Devices Data: Components</title>
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
    <a href="/"><h1>Components Data</h1></a>
    <% if (items.length > 0) { %>
    <ul>
      <% items.forEach(function(item) { %>
      <li><a href="/components/<%=item._id%>"><%=item.name%></a></li>
      <% }); %>
    </ul>
    <% } else { %>
    <div>No components found.</div>
    <% } %>

    <div class="control">
      <h2>Add or update a Medical Component</h2>
      <script>
      function onFormSubmit(form) {
        form.action = form.action + form.elements['item[id]'].value;
        console.log(form.action);
        return true;
      } 
      </script>
      <form method="post" action="/components/"
            onsubmit="return onFormSubmit(this);">
        <!-- The line above dynamically sets the PUT destination when the -->
        <!-- form is submitted. -------------------------------------------->
        <input type="hidden" name="_method" value="put">
        <!-- The line above tells the server to treat this as a PUT request. -->
        <label>Component ID<br>
          (lowercase letters only, no spaces):
          <input name="item[id]" type="text" pattern="[a-z]+" required
                 placeholder="component">
        </label>
        <label>Name: 
          <input name="item[name]" type="text" required>
        </label>
        <label>Description: 
          <input name="item[description]" type="text" required>
        </label>
        <label>Type: 
          <input name="item[type]" type="text" required>
        </label>
        <label>Line: 
          <input name="item[line]" type="text" >
        </label>
        <label>Launch Date: 
          <input name="item[launchDate]" type="text" required>
        </label>
        <label>Status: 
          <input name="item[status]" type="text" required>
        </label>
        <label>Capacity: 
          <input name="item[capacity]" type="text" >
        </label>
         <label>Image URL:
          <input name="item[image]"  type="url" size="80"> 
         </label>
        <button>Add or update</button>
      </form>
    </div>
    <div class="control">
      <h2>Search for components by name</h2>
      <form method="get" action="/components/">
        <label>Component name: <input name="name"></label>
        <button>Search</button>
      </form>
    </div>
    <div class="control">
      <h2>Search for components by status</h2>
      <form method="get" action="/components/">
        <label>Component name: <input name="status"></label>
        <button>Search</button>
      </form>
    </div>
    <div class="control">
      <h2>Search for components by Line</h2>
      <form method="get" action="/components/">
        <label>Component name: <input name="line"></label>
        <button>Search</button>
      </form>
    </div>
  </body>
</html>